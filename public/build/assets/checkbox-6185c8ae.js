import{r as t,j as k}from"./index-2a4703ec.js";import{b as N,$ as w,_ as C,c as E}from"./button-77adb7fd.js";import{c as M,$ as S,a as D,b as g,d as q,e as B}from"./index-b5cb4413.js";const L=M("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]);function O(e){const c=t.useRef({value:e,previous:e});return t.useMemo(()=>(c.current.value!==e&&(c.current.previous=c.current.value,c.current.value=e),c.current.previous),[e])}const R="Checkbox",[A,W]=S(R),[K,H]=A(R),T=t.forwardRef((e,c)=>{const{__scopeCheckbox:r,name:d,checked:l,defaultChecked:a,required:b,disabled:i,value:u="on",onCheckedChange:$,...v}=e,[n,h]=t.useState(null),j=N(c,o=>h(o)),m=t.useRef(!1),y=n?!!n.closest("form"):!0,[f=!1,x]=D({prop:l,defaultProp:a,onChange:$}),I=t.useRef(f);return t.useEffect(()=>{const o=n==null?void 0:n.form;if(o){const p=()=>x(I.current);return o.addEventListener("reset",p),()=>o.removeEventListener("reset",p)}},[n,x]),t.createElement(K,{scope:r,state:f,disabled:i},t.createElement(w.button,C({type:"button",role:"checkbox","aria-checked":s(f)?"mixed":f,"aria-required":b,"data-state":_(f),"data-disabled":i?"":void 0,disabled:i,value:u},v,{ref:j,onKeyDown:g(e.onKeyDown,o=>{o.key==="Enter"&&o.preventDefault()}),onClick:g(e.onClick,o=>{x(p=>s(p)?!0:!p),y&&(m.current=o.isPropagationStopped(),m.current||o.stopPropagation())})})),y&&t.createElement(F,{control:n,bubbles:!m.current,name:d,value:u,checked:f,required:b,disabled:i,style:{transform:"translateX(-100%)"}}))}),X="CheckboxIndicator",z=t.forwardRef((e,c)=>{const{__scopeCheckbox:r,forceMount:d,...l}=e,a=H(X,r);return t.createElement(q,{present:d||s(a.state)||a.state===!0},t.createElement(w.span,C({"data-state":_(a.state),"data-disabled":a.disabled?"":void 0},l,{ref:c,style:{pointerEvents:"none",...e.style}})))}),F=e=>{const{control:c,checked:r,bubbles:d=!0,...l}=e,a=t.useRef(null),b=O(r),i=B(c);return t.useEffect(()=>{const u=a.current,$=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor($,"checked").set;if(b!==r&&n){const h=new Event("click",{bubbles:d});u.indeterminate=s(r),n.call(u,s(r)?!1:r),u.dispatchEvent(h)}},[b,r,d]),t.createElement("input",C({type:"checkbox","aria-hidden":!0,defaultChecked:s(r)?!1:r},l,{tabIndex:-1,ref:a,style:{...e.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function s(e){return e==="indeterminate"}function _(e){return s(e)?"indeterminate":e?"checked":"unchecked"}const P=T,G=z,J=t.forwardRef(({className:e,...c},r)=>k.jsx(P,{ref:r,className:E("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...c,children:k.jsx(G,{className:E("flex items-center justify-center text-current"),children:k.jsx(L,{className:"h-4 w-4"})})}));J.displayName=P.displayName;export{J as C,L as a};
